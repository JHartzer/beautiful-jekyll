<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title>Collaborative Localization using Ultra-Wideband Ranging | Jacob M. Hartzer</title> <meta name="author" content="Jacob M. Hartzer"> <meta name="description" content="A simple, whitespace theme for academics. Based on [*folio](https://github.com/bogoli/-folio) design. "> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="https://unpkg.com/bootstrap-table@1.22.1/dist/bootstrap-table.min.css"> <link rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons"> <link rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?19f3075a2d19613090fe9e16b564e1fe" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="/assets/img/favicon.ico?c4cd999a796234622b99ae5bd883b28c"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://jhartzer.github.io//blog/2020/UWB-Localization/"> <link rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?e74e74bf055e5729d44a7d031a5ca6a5" media="none" id="highlight_theme_dark"> <script src="/assets/js/theme.js?96d6b3e1c3604aca8b6134c7afdd5db6"></script> <script src="/assets/js/dark_mode.js?9b17307bb950ffa2e34be0227f53558f"></script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"><span class="font-weight-bold">Jacob </span>M. Hartzer</a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about</a> </li> <li class="nav-item active"> <a class="nav-link" href="/blog/">blog<span class="sr-only">(current)</span></a> </li> <li class="nav-item "> <a class="nav-link" href="/publications/">publications</a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">cv</a> </li> <li class="nav-item "> <a class="nav-link" href="/search/">search</a> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="fas fa-moon"></i> <i class="fas fa-sun"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5"> <div class="post"> <header class="post-header"> <h1 class="post-title">Collaborative Localization using Ultra-Wideband Ranging</h1> <p class="post-meta">October 5, 2020</p> <p class="post-tags"> <a href="/blog/2020"> <i class="fas fa-calendar fa-sm"></i> 2020 </a>   ·   <a href="/blog/tag/localization"> <i class="fas fa-hashtag fa-sm"></i> Localization</a>   </p> </header> <article class="post-content"> <div id="markdown-content"> <h1 id="introduction">Introduction</h1> <p>There are numerous industries that are in the process of developing autonomous passenger vehicles. Such vehicles have the capacity to reduce risk and free time of riders. In the development of an autonomous vehicles, a key consideration is reliable localization in order to plan for and react to the environment. Typically,h igh position accuracy is achieved through the use of Global Navigation Satellite Systems (GNSS). The use of GNSS with an Inertial Measurement Unit (IMU) or odometry measurements can lead to an accurate positioning system. <img src="/assets/img/uwb/uwb_collab.png" alt="UWB Ranging" style="float:right;width:400px"></p> <p>Reliable GNSS measurements are often not available. Because GNSS receivers must have line of sight with at least four satellites, environments that include obstructions pose significant challenges. Urban canyons, tunnels, or indoor environments degrade or fully obstruct GNSS signals, forcing the system to rely on dead reckoning. These measurements are subject to drift, and therefore cannot be trusted after continued interruption of GNSS. As such, it would be advantageous to the continued development of autonomous vehicles to use a exteroceptive sensor for navigation through environments where GNSS is typically denied.</p> <p>Ultra-Wideband (UWB) radio, utilizes low-energy pulse communication typically for short-range, high-bandwidth applications. By measuring time of flight across various frequencies, it is possible to measure distance between modules while overcoming multipath errors. This has allowed UWB modules to be applied towards localization and tracking problems. With the continued development of UWB technology and roll out in commercial products, it’s ability to aid in navigation should continue to be explored.</p> <p>By using UWB ranging, autonomous vehicles can generate ranging estimates to other independent vehicles. Just like measurements to landmarks, these measurements are not subject to drift when GNSS measurements are obscured, and can be made available in both indoor and outdoor environments. Known as collaborative localization, these measurements can leverage the growing number of intelligent vehicles on the road, and can increase the accessible area of autonomous vehicles.</p> <h1 id="background">Background</h1> <p>Ultra-Wideband, with it’s previously mentioned benefits, is a very promising technology for localization. There are many examples of using UWB ranging modules for high-accuracy indoor localization of ground or aerial systems. These systems typically measure with respect to fixed landmark anchors.</p> <p>There are also examples of using UWB modules for outdoor vehicular environments. Such a framework has the capacity to increase localization accuracy of existing systems, or provide accurate localization in environments where GNSS is not reliable, such as tunnels or urban canyons.</p> <p>Given a network of vehicles, it is possible to leverage relative measurements to provide better localization accuracy as a group, than as a collection of individuals, generally referred to as collaborative localization (CL). These methods are generally classified in two groups: centralized methods, and decentralized methods.</p> <h4 id="centralized-cl">Centralized CL</h4> <p>Centralized CL methods use a single or multiple fusion centers, to which every vehicle communicates measurement information. These state estimators are capable of producing optimal linearized state estimates and have been used in a number of applications with success. A major issue with centralized networks is sensitivity to failure. As the number of measurements made can increase on the order of O(n^2), centralized networks can meet constraints when large networks of nodes are implemented with complex measurements or update functions.</p> <h4 id="decentralized-cl">Decentralized CL</h4> <p>Decentralized CL (DCL) methods are defined by distributing the state estimation computation across every agent in the network. Unlike centralized methods, DCL methods are not susceptible to single point failures. These generic, recursive approximations of the centralized method can extend the framework to decrease convergence time or computational cost without loss of accuracy.</p> <h1 id="contributions">Contributions</h1> <p>This research seeks to expand upon previous work through the following contributions</p> <ul> <li>Expanded previous UWB EKF and DCL simulation environments through the incorporation of vehicle and sensor models and the framework for Monte Carlo simulations.</li> <li>Validated the zero-mean normally distributed error assumption for a UWB ranging module.</li> <li>Showed EKF localization improvements using real-time UWB measurements to landmarks in GNSS denied environments.</li> <li>Showed DCL accuracy improvements by utilizing real-time UWB relative ranging measurements.</li> </ul> <h1 id="decentralized-collaborative-localization">Decentralized Collaborative Localization</h1> <p>The decentralized collaborative localization algorithm is a form of a Kalman filter that approximates the centralized filter through distributed computation. The estimation of the entire state of a network is broken down into smaller filters where each vehicle has private controls and measurements that are used internally and relative measurements that require the sharing of state and covariance information.</p> <p>For a network of N vehicles, each vehicle initializes its own 6-DOF state and assumes zero cross-correlations between the vehicles until a relative measurement is made. As such, the number of vehicles does not need to be known.</p> <h4 id="initialization">Initialization</h4> <p>It is assumed that at the beginning of any network, the vehicles positions are uncorrelated. Therefore, the network state can be initialized with the initial beliefs of each vehicle and the cross correlation is set as a zero matrix.</p> <p>When the vehicles come into sensing range, generally the cross correlation is no longer equal to zero and therefore the cross-correlation term can be decomposed to allow each vehicle to maintain estimates of cross correlation terms that can be combined at the next relative measurement. The decomposition sets the cross-correlation of the sensing vehicle equal to the true cross-correlation and the sensed vehicle estimate equal to the identity matrix.</p> <h4 id="control">Control</h4> <p>It is assumed that the vehicles follow the motion model <em>g(U)</em> where control input U is an IMU measurement. The prediction step for a vehicle is given by the standard EKF equations.</p> <h4 id="private-update">Private Update</h4> <p>It is assumed that the private update measurements are functions of the state of a single vehicle with a Gaussian error disturbance <em>h(x)</em>. These updates come from GNSS positioning and UWB landmark ranging measurements.</p> <h4 id="relative-update">Relative Update</h4> <p>It is assumed that the relative update measurement to be a function of the state of two vehicles with a Gaussian error disturbance. These updates come from vehicle-to-vehicle relative UWB ranging measurements. The cross-correlation estimates are combined to be used in the best state estimate of the approximated system.</p> <h1 id="simulation">Simulation</h1> <p><img src="/assets/img/uwb/sc.png" alt="UWB Ranging" style="float:right;width:400px"></p> <p>In order to simulate various collaborative localization algorithms, a simulation framework that would be flexible in number of cars and networking was created in MatLab: <a href="https://github.com/unmannedlab/collab_localization" rel="external nofollow noopener" target="_blank">collab_localization</a> repository. The simulation was designed to handle an indeterminate number of cars and configurations. Additionally, to facilitate the testing of collaborative localization, UWB tags can be treated as either fixed landmarks or mobile units on other vehicles.</p> <h4 id="sensing-models">Sensing Models</h4> <p>The UWB sensing model was implemented with Gaussian normal randomly distributed errors with a measured standard deviation of 0.31 meters.</p> <p>The GNSS sensing model takes a Circular Error Probable (CEP) error value and converts into a distance root mean square (DRMS), which is approximately 84.93\% of CEP. This DRMS value is input to a circularly symmetric Rayleigh distribution to perturb the measurement.</p> <h4 id="output">Output</h4> <p>The resulting output of this software package is a visual animation of the simulation, position error summaries for each vehicle, and the final state and covariance. When compiled in Monte Carlo simulations, these data can be used to evaluate filter performance improvements.</p> <h4 id="results">Results</h4> <p><img src="/assets/img/uwb/err_sc.png" alt="UWB Ranging" style="float:right;width:400px"></p> <p>Using the simulation framework, it was possible to test a wide variety of vehicle environments and sensor configurations. These configurations included vehicles moving parallel to each other, vehicles moving perpendicular in street crossings, and moving in groups in tunnels without GNSS measurements. Additionally, UWB landmarks were added to each of these situations.</p> <p>Examples of the Monte Carlo simulations performed are shown. These figures show the crossing of two vehicles at an intersection using various estimation algorithms.</p> <p>The simulations showed that UWB measurements offered improvements to localization accuracy across all experiments. Using more vehicles improved accuracy, and using additional landmarks offered significant improvements. This was especially the case in situations where GNSS data was not available such as tunnels and urban canyons.</p> <h1 id="experimentation">Experimentation</h1> <p>The filter framework was tested in Bryan, Texas using the Unmanned Systems Lab autonomous trolley. The Decawave EVK1000 evaluation boards were mounted alongside a VectorNav VN-300 and ArduSimple RTK GNSS. The trolley itself includes PACMod, a by-wire kit prepared by Autonomous Stuff, which gives access to wheel odometry and steering data.</p> <p>Using tripods, a second set of UWB ranging modules were placed in various experimental setups to either represent road landmarks, or a second vehicle.</p> <p>As in the simulations, the addition of the two UWB sensors on the vehicle offered improvements to the localization accuracy of the vehicle in all scenarios. The improvement was even more pronounced when GNSS data to the VN-300 was denied. The quality of data coming from the VN-300 was underestimated, leading to much higher location accuracy than simulated. As such, the percent improvement from simply adding UWB measurements was lower than in the simulations, with the smallest percent improvement being 2.9% and the largest being 9.3%. However, removing the GNSS updates showed results much more in line with the simulation, with the addition of UWB measurements showing a 83.3% improvement in localization accuracy in a tunnel environment.</p> <h1 id="future-work">Future Work</h1> <p>Future work for this research includes</p> <ul> <li>Experiments with additional tags and multiple moving vehicles</li> <li>Explore transitional space between GPS and GPS-denied environments</li> <li>Compare the decentralized approximation to the centralized method</li> <li>Simulate the effects of delays in the system</li> </ul> <p>In the future, testing will include more in-person experiments with multiple moving vehicles and a greater number of UWB tags. This would allow for better evaluation of truly cooperative localization using of vehicles using UWB and will validate the algorithm used in simulation. This will also explore the use of real-time varying covariance estimations in the update equations.</p> <h1 id="citation">Citation</h1> <p>This content was presented at ITSC 2021 with slides available <a href="/assets/pdf/2021-09-ITSC.pdf">here</a>.</p> <div class="language-bibtex highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">@inproceedings</span><span class="p">{</span><span class="nl">2021_Vehicular_Teamwork</span><span class="p">,</span>
  <span class="na">author</span>    <span class="p">=</span> <span class="s">{Hartzer, Jacob and Saripalli, Srikanth}</span><span class="p">,</span>
  <span class="na">booktitle</span> <span class="p">=</span> <span class="s">{2021 IEEE International Intelligent Transportation Systems Conference (ITSC)}</span><span class="p">,</span>
  <span class="na">title</span>     <span class="p">=</span> <span class="s">{Vehicular Teamwork: Collaborative localization of Autonomous Vehicles}</span><span class="p">,</span>
  <span class="na">year</span>      <span class="p">=</span> <span class="s">{2021}</span><span class="p">,</span>
  <span class="na">pages</span>     <span class="p">=</span> <span class="s">{1077-1082}</span><span class="p">,</span>
  <span class="na">doi</span>       <span class="p">=</span> <span class="s">{10.1109/ITSC48978.2021.9564981}</span><span class="p">,</span>
<span class="p">}</span>
</code></pre></div></div> <h1 id="related-works">Related Works</h1> <ol> <li>L. Yao, Y. A. Wu, L. Yao, and Z. Z. Liao, “<strong>An integrated IMU and UWB sensor based indoor positioning system</strong>,” in <em>2017 International Conference on Indoor Positioning and Indoor Navigation (IPIN)</em>, pp. 1–8, 2017.</li> <li>L. Luft, T. Schubert, S. I. Roumeliotis, and W. Burgard, “<strong>Recursive decentralized localization for multi-robot systems with asynchronous pairwise communication</strong>,” <em>The International Journal of Robotics Research</em>, vol. 37, no. 10, pp. 1152–1167, 2018.</li> <li>S. I. Roumeliotis and G. A. Bekey, “Distributed multirobot localization,”IEEE Transactionson Robotics and Automation, vol. 18, no. 5, pp. 781–795, 2002</li> <li>S. Tanwar and G. Gao, “<strong>Decentralized collaborative localization with deep gps coupling for UAVs</strong>,” in <em>2018 IEEE/ION Position, Location and Navigation Symposium, PLANS 2018 - Proceedings</em>, (United States), pp. 767–774, June 2018.</li> </ol> </div> </article> </div> </div> <footer class="fixed-bottom"> <div class="container mt-0"> © Copyright 2023 Jacob M. Hartzer. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@4/imagesloaded.pkgd.min.js"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.8/dist/medium-zoom.min.js" integrity="sha256-7PhEpEWEW0XXQ0k6kQrPKwuoIomz8R8IYyuU1Qew4P8=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?7b30caa5023af4af8408a472dc4e1ebb"></script> <script defer src="https://unpkg.com/bootstrap-table@1.22.1/dist/bootstrap-table.min.js"></script> <script src="/assets/js/no_defer.js?d633890033921b33e0ceb13d22340a9c"></script> <script defer src="/assets/js/common.js?acdb9690d7641b2f8d40529018c71a01"></script> <script defer src="/assets/js/copy_code.js?c9d9dd48933de3831b3ee5ec9c209cac" type="text/javascript"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js"></script> <script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> </body> </html>